<!DOCTYPE html>
<html lang="en">

<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Colorlib">
    <meta name="description" content="#">
    <meta name="keywords" content="#">
    <!-- Page Title -->
    <title>Тренажер</title>
    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="static/css/bootstrap.min.css">
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,500,700,900" rel="stylesheet">
    <!-- Simple line Icon -->
    <link rel="stylesheet" href="static/css/simple-line-icons.css">
    <!-- Themify Icon -->
    <link rel="stylesheet" href="static/css/themify-icons.css">
    <!-- Hover Effects -->
    <link rel="stylesheet" href="static/css/set1.css">
    <!-- Main CSS -->
    <link rel="stylesheet" href="static/css/style.css">
</head>
<style>
    {
  box-sizing: border-box;
}
      div.left-block {
    float: left;
    width: 35%;
}
div.right-block {
    float: right;
    width: 63%;
}
body {
  background-color: #f1f1f1;
}
h1 {
  text-align: center;  
}

input.invalid {
  background-color: #ffdddd;
}

.tab {
  display: none;
}

button {
  background-color: #4CAF50;
  color: #ffffff;
  border: none;
  padding: 10px 20px;
  font-size: 17px;
  font-family: Raleway;
  cursor: pointer;
}

button:hover {
  opacity: 0.8;
}

#prevBtn {
  background-color: #bbbbbb;
}

.step {
  height: 15px;
  width: 15px;
  margin: 0 2px;
  background-color: #bbbbbb;
  border: none;  
  border-radius: 50%;
  display: inline-block;
  opacity: 0.5;
}

.step.active {
  opacity: 1;
}

.step.finish {
  background-color: #4CAF50;
}
</style>
<body>
    <!--============================= HEADER =============================-->
    <div class="nav-menu">
        <div class="bg transition">
            <div class="container-fluid fixed">
                <div class="row">
                    <div class="col-md-12">
                        <nav class="navbar navbar-expand-lg navbar-light">
                            <a href="/"  class="navbar-brand" style="color: #fff;font-size: 38px;">DbBK</a>
                            <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
                <span class="icon-menu"></span>
              </button>
                            <div class="collapse navbar-collapse justify-content-end" id="navbarNavDropdown">
                                <ul class="navbar-nav">
                                    <li class="nav-item active">
                                        <a class="nav-link" href="/">Головна</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/training">Тренажер</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/test">Тестування</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="nav-link" href="/user-account">Особистий кабінет</a>
                                    </li>
                                    <li class="nav-item">
                                        <a class="btn btn-outline-light top-btn" href="/student/logout">Вихід</a>
                                    </li>

                                </ul>
                            </div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- SLIDER -->
    <!--// SLIDER -->
    <!--//END HEADER -->

    <section class="main-block">
      <div style="padding: 5%; padding-top: 10%; background-color: white">
       <form method="post" id="regForm"> <!--убрала action -->
        {{ range . }}
        {{ if (eq .Type_q 1)  }}
<div class="tab">{{ .Text_q }}
      <p><img src="/static/img/questions/q/{{.Id}}.png" width="300" height="150"></p>
    <label style="display: none;"><input type="text" name="fdv" style="display: none;"></input>/static/img/questions/q/{{.Id}}1.png</label>
    <p><select id="sel1">
     {{range .Questions}}
      {{range .Answers}}
      
      {{if (eq .Table_type 1)}}
              <option value="{{ .Corr}}">{{ .Text_a}}</option>

              <{{end}}{{end}}{{end}}
              </select>
              <select id="sel2">
      {{range .Questions}}
      {{range .Answers}}
      
      {{if (eq .Table_type 2)}}
              <option value="{{ .Corr}}">{{ .Text_a}}</option>

              <{{end}}{{end}}{{end}}</select></p></div>
     {{end}}
{{ if (eq .Type_q 2) }}
<div class="tab">{{ .Text_q }}
          {{range .Questions}}
          {{if (eq .Correct true)}}
          <p><label><input type="radio" name="{{ .Id_q}}" id="true" oninput="this.className = ''" value="{{.Id_a}}"></input>
            {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}
     {{if (ne .Correct true)}}
          <p><label> <input type="radio" name="{{ .Id_q}}" id="false" oninput="this.className = ''" value="{{.Id_a}}"></input>
           {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}{{end}}
     </div>{{end}}


{{ if (eq .Type_q 3) }}
<div class="tab">{{ .Text_q }}
    <p><img src="/static/img/questions/q/{{.Id}}.png" width="400" height="150"></p>
          {{range .Questions}}
          {{if (eq .Correct true)}}
          <p><label><input type="radio" name="{{ .Id_q}}" id="true3" oninput="this.className = ''" value="{{.Id_a}}"></input>
            {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}
     {{if (ne .Correct true)}}
          <p><label> <input type="radio" name="{{ .Id_q}}" id="false3" oninput="this.className = ''" value="{{.Id_a}}"></input>
           {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}{{end}}
<p><label id="errLabel3" style="color: red; background-color: white">{{ .Not}}</label></p>
     </div>{{end}}




       {{if (eq .Type_q 5) }}
<div class="tab">{{ .Text_q }}
          {{range .Questions}}
          {{if (eq .Correct true)}}
          <p><label><input type="checkbox" name="{{ .Id_q}}" id="true" oninput="this.className = ''" value="{{.Id_a}}"></input>
            {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}
     {{if (ne .Correct true)}}
          <p><label> <input type="checkbox" name="{{ .Id_q}}" id="false" oninput="this.className = ''" value="{{.Id_a}}"></input>
           {{range .Answers}} {{ .Text_a}}</label></p>
{{end}}
     {{end}}{{end}}
     </div>{{end}}
{{if (eq .Type_q 6) }}
<div class="tab">{{ .Text_q }}
          {{range .Questions}}
           {{if (eq .Correct true)}} 
          <p><label style="color: white"> <input type="radio" name="{{ .Id_q}}" id="11" oninput="this.className = ''"></input>{{range .Answers}} 
            <img src="/static/img/questions/{{.Id}}.png" width="100" height="50">/static/img/questions/{{.Id}}.png</label> </p>
{{end}}
     {{end}}
     {{if (ne .Correct true)}} 
          <p><label style="color: white"> <input type="radio" name="{{ .Id_q}}" id="12" oninput="this.className = ''" ></input>{{range .Answers}} 
            <img src="/static/img/questions/{{.Id}}.png" width="100" height="50">/static/img/questions/{{.Id}}.png</label> </p>
{{end}}
     {{end}}{{end}}
     </div>
{{ end }}    
                                              <!-- ДОДАТИ ІНШІ ТИПИ ЗАПИТАНЬ-->
     
     {{end}}
     <p><label id="errLabel" style="color: red; background-color: white"></label>
      <img  width="100" height="50" id="errImage" style="display: none">
     <div style="overflow:auto;">
    <div style="float:right;">
      <button type="button" id="nextQuestion" onclick="nextPrev(1)">Далі</button>
    </div>
  </div>
    <div style="text-align:center;margin-top:40px;">
     {{ range . }}
  <span class="step"></span>{{ end }} 
</div>
      </form>
       <script>
var currentTab = 0; 
showTab(currentTab); 

function showTab(n) {
  // This function will display the specified tab of the form...
  var x = document.getElementsByClassName("tab");
  x[n].style.display = "block";
  //... and fix the Previous/Next buttons:
  if (n == (x.length - 1)) {
    document.getElementById("nextBtn").innerHTML = "Далі";
  } else {
    document.getElementById("nextBtn").innerHTML = "Далі";
  }
  //... and run a function that will display the correct step indicator:
  fixStepIndicator(n)
}

function nextPrev(n) {
  // This function will figure out which tab to display
  var x = document.getElementsByClassName("tab");
  // Exit the function if any field in the current tab is invalid:
  if (n == 1 && !validateForm()) return false;
  // Hide the current tab:
  x[currentTab].style.display = "none";
  // Increase or decrease the current tab by 1:
  currentTab = currentTab + n;
  // if you have reached the end of the form...
  if (currentTab >= x.length) {
    // ... the form gets submitted:
    document.getElementById("regForm").submit();
    return false;
  }
  // Otherwise, display the correct tab:
  showTab(currentTab);
}

function validateForm() {
  // This function deals with validation of the form fields
  var x, y, i, valid = true;
  var u = false;
  var lab1 = "";
  var  k2= 0;
  var k = 0;
  var k3 = 0;
  x = document.getElementsByClassName("tab");
  y = x[currentTab].getElementsByTagName("input");
  
  // A loop that checks every input field in the current tab:
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
    if (y[i].type == 'radio' && y[i].id == "true") {
      lab1 = y[i].parentNode.textContent; 
    }
    else {
      if (y[i].type == 'radio' && y[i].id == "11") {
      lab1 = y[i].parentNode.textContent;  
    }
    else {
      if (y[i].type == 'checkbox' && y[i].id == "true") {
      k = k+1;
    }
    }
  }}
  for (i = 0; i < y.length; i++) {
    // If a field is empty...
   if  (y[i].type == 'radio' && y[i].checked && y[i].id == "true3") {
      u = true;
    }
    else {
        if (y[i].type == 'radio' && y[i].checked && y[i].id == "false3") {
      document.getElementById("errLabel3").style.display = "block";
    }
    else {
    if (y[i].type == 'radio' && y[i].checked && y[i].id == "true") {
      u = true;
    }
    else {
       if (y[i].type == 'radio' && y[i].checked && y[i].id == "false") {   
      document.getElementById("errLabel").innerHTML = "Відповідь не вірна! Правильна відповідь: "+lab1;
  }
  else {
    if (y[i].type == 'radio' && y[i].id == "11" && y[i].checked) {
      u = true;
    }
    else {
       if (y[i].type == 'radio' && y[i].checked && y[i].id == "12") {   
      document.getElementById("errLabel").innerHTML = "Відповідь не вірна! Правильна відповідь: ";
      document.getElementById("errImage").style.display = "block";
      document.getElementById("errImage").width = 100;
    document.getElementById("errImage").height = 50;
      document.getElementById("errImage").src = lab1;
  }
  else {
    if (y[i].type == 'checkbox' && y[i].checked) {
        if (y[i].id == "true")
        {
          k2 = k2+1;
        }
        else {
          k3 = k3+1;
        }
        if (k2==0) {
          document.getElementById("errLabel").innerHTML = "Відповідь не вірна. Правильна відповідь: ";
        }
        else {
        if (k2==k && k3==0) {
          u  = true;
        }
        else {
          if (k2==k && k3>0) {
             document.getElementById("errLabel").innerHTML = "Серед обраних відповідей є зайва відповідь: ";
          }
          else {
            if (k2!=k && k3==0) {
              document.getElementById("errLabel").innerHTML = "Відповідь не повна. Ще правильна відповідь: ";
            }
            else {
              document.getElementById("errLabel").innerHTML = "Відповідь не повна та є невірна відповідь. ";
            }
          }}}
        }}}
        }
    }
  }
  }
}
 for (i = 0; i < y.length; i++) {
  if (y[i].type == 'checkbox') {
    if (k2==0) {
      if (y[i].id=="true"){
        document.getElementById("errLabel").innerHTML += y[i].parentNode.textContent+", ";
      }
    }
    else {
     if  (k2==k && k3>0) {
      if (y[i].id=="false" && y[i].checked){
        document.getElementById("errLabel").innerHTML += y[i].parentNode.textContent+", ";
      }
    }
    else {
      if (k2!=k && k3==0) {
        if (y[i].id=="true" && !y[i].checked){
        document.getElementById("errLabel").innerHTML += y[i].parentNode.textContent+", ";
      }
             }
             else {
    if (y[i].id=="false" && y[i].checked){
        document.getElementById("errLabel").innerHTML += "Невірна відповідь: "+y[i].parentNode.textContent+", ";
      }
      else {
        if (y[i].id=="true" && !y[i].checked) {
          document.getElementById("errLabel").innerHTML += "Вірна відповідь: "+y[i].parentNode.textContent+", "; }
        }
      }
             }
    }

     }
     else {
        if (y[i].type == 'text') {
var e = document.getElementById("sel1");
var ee = document.getElementById("sel2");
var strUser = e.options[e.selectedIndex].value;
var strUser2 = ee.options[ee.selectedIndex].value;
if (strUser=="true" && strUser2=="true") {
    u = true;
}
else {
    document.getElementById("errLabel").innerHTML = "Відповідь не вірна. Правильна відповідь: ";
    document.getElementById("errImage").src = y[i].parentNode.textContent; 
    document.getElementById("errImage").width = 300;
    document.getElementById("errImage").height = 150;
    document.getElementById("errImage").style.display = "block ";
    if (strUser !="true") {     
    for (i = 0; i < e.options.length; i++)
    {
        if (e.options[i].value == "true") {
        document.getElementById("errLabel").innerHTML += e.options[i].text + " ";
        }
        }
        if (strUser2 !="true") {
            for (i = 0; i < ee.options.length; i++)
    {
        if (ee.options[i].value == "true" && strUser2 !="true") {
        document.getElementById("errLabel").innerHTML += ee.options[i].text;
        }
        }
        }
        else {
            document.getElementById("errLabel").innerHTML += ee.options[ee.selectedIndex].text;
        }
    }
    else {
        document.getElementById("errLabel").innerHTML += e.options[e.selectedIndex].text + " ";
for (i = 0; i < ee.options.length; i++)
    {
        if (ee.options[i].value == "true" && strUser2 !="true") {
        document.getElementById("errLabel").innerHTML += ee.options[i].text;
        }
        }
    }
    }
        }
     }
    }
  
  // If the valid status is true, mark the step as finished and valid:
  if (u) {
    document.getElementById("errLabel").innerHTML = "";
    document.getElementById("errImage").style.display = "none";
    document.getElementById("errLabel3").style.display = "none";
    document.getElementsByClassName("step")[currentTab].className += " finish";
  }

  return u; // return the valid status
}

function fixStepIndicator(n) {
  // This function removes the "active" class of all steps...
  var i, x = document.getElementsByClassName("step");
  for (i = 0; i < x.length; i++) {
    x[i].className = x[i].className.replace(" active", "");
  }
  //... and adds the "active" class on the current step:
  x[n].className += " active";
}
</script>
</div>
    </section>


    <footer class="main-block dark-bg" style="padding: 30px 0;">
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <div style="text-align: center">
            <img src="/static/img/onaft.png" style="width: 60px; height: 60px; vertical-align: middle;">
            <span style="color: white"> ©  ONAFT  2019   </span>
            <img src="/static/img/KitKB.png" style="width: 100px; height: 70px; vertical-align: middle;">
          </div>
                </div>
            </div>
        </div>
    </footer>
    <!--//END FOOTER -->




    <!-- jQuery, Bootstrap JS. -->
    <!-- jQuery first, then Popper.js, then Bootstrap JS -->
    <script src="static/js/jquery-3.2.1.min.js"></script>
    <script src="static/js/popper.min.js"></script>
    <script src="static/js/bootstrap.min.js"></script>

    <script>
               $('.fixed').addClass('is-sticky');

    </script>
</body>

</html>
